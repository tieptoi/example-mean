"use strict";angular.module("mainCtrl",["thingService"]).controller("MainController",["$scope","Thing",function(a,b){}]),angular.module("itemCtrl",["itemService"]).controller("ItemController",["$scope","$filter","Item",function(a,b,c){a.tab=1,a.sortOrder="views-desc",a.currentPage=1,c.getItems().success(function(b){a.items=b,angular.forEach(a.items,function(a){a.orderQuantity=1})}).error(function(a){console.log(a)}),a.viewDetail=function(b){a.$emit("viewItemDetail",b)},a.getListOfPages=function(b){var c=Math.round(a.items.length/b),d=[],e=1;for(e=1;c>e;e++)d.push(e);return d},a.isCurrnetPage=function(b){return b===a.currentPage},a.setPage=function(b){a.currentPage=b},a.sortChange=function(){a.items=b("orderBy")(a.items,a.sortOrder.split("-")[0],"desc"===a.sortOrder.split("-")[1]?!0:!1)}}]).controller("ModalItemController",["$scope","Item",function(a,b){a.$onRootScope("viewItemDetail",function(c,d){d.views=d.views+1,b.updateItem(d).success(function(a){console.log(a)}).error(function(a){console.log(a)}),a.item=d}),a.isSelected=function(b){return b===a.tab},a.selectTab=function(b){a.tab=b},a.add=function(b,c){c.$valid&&($("#modal").modal("hide"),a.$emit("add2Cart",b))}}]),angular.module("navbarCtrl",["ngCookies"]).controller("NavbarController",["$scope","$cookies","$location",function(a,b,c){a.cart={items:[],total:0},a.menus=[{title:"Home",link:"/"},{title:"Items",link:"/items"},{title:"Contact Us",link:"/contact"},{title:"About Us",link:"/about"}],a.isActive=function(a){return a===c.path()},a.$onRootScope("add2Cart",function(c,d){var e=!1;angular.forEach(a.cart.items,function(a){a.name===d.name&&(e=!0,console.log(a.orderQuantity),a.orderQuantity=a.orderQuantity+d.orderQuantity)}),e||(a.cart.items.push({description:d.description,image:d.image,quantity:d.quantity,name:d.name,pid:d.pid,price:d.price,orderQuantity:d.orderQuantity}),b.putObject("cart",a.cart)),a.changeQuantity()}),a.remove=function(c){c.orderQuantity>0&&(a.cart.total=a.cart.total-c.orderQuantity*c.price),a.cart.items.splice(a.cart.items.indexOf(c),1),b.putObject("cart",a.cart)},a.changeQuantity=function(){a.cart.total=0,angular.forEach(a.cart.items,function(b){b.orderQuantity>0&&(a.cart.total=a.cart.total+b.orderQuantity*b.price)})},b.getObject("cart")&&null!==b.getObject("cart")&&(a.cart=b.getObject("cart"),a.changeQuantity())}]),angular.module("thingService",[]).service("Thing",["$http",function(a){this.getThings=function(){return a.get("/api/awesomeThings")},this.getThing=function(b){return a.get("/api/awesomeThing/"+b)},this.addThing=function(b){return a.post("/api/addThing",JSON.stringify(b))}}]),angular.module("itemService",[]).service("Item",["$http",function(a){this.getItems=function(){return a.get("/api/items")},this.addItem=function(b){return a.post("/api/addItem",JSON.stringify(b))},this.updateItem=function(b){return a.post("/api/updateItem",JSON.stringify(b))}}]),angular.module("app.routes",["ngRoute"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"partials/mainView",controller:"MainController"}).when("/items",{templateUrl:"partials/itemsView",controller:"ItemController"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),angular.module("todoApp",["app.routes","itemCtrl","mainCtrl","navbarCtrl","thingService","itemService"]).config(["$provide",function(a){a.decorator("$rootScope",["$delegate",function(a){return Object.defineProperty(a.constructor.prototype,"$onRootScope",{value:function(b,c){var d=a.$on(b,c);return this.$on("$destroy",d),d},enumerable:!1}),a}])}]);